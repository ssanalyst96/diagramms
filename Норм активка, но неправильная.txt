@startuml
title Процесс обработки файла и формирования отчета

start
:Пользователь загружает файл в систему;
:Система проверяет файл на валидность;

if (Файл валиден?) then (Да)
  :Система формирует отчет;
  :Предоставить выбор формата (PDF/Excel);
  :Пользователь выбирает формат;
  :Система генерирует отчет в выбранном формате;
  
  fork
    :Отправить отчет менеджеру;
  fork again
    :Загрузить отчет в облачное хранилище;
  end fork
  :Отчет успешно обработан;
  
else (Нет)
  :Подсветить ошибки в файле;
  :Предложить исправление (автоматическое/ручное);
  
  if (Пользователь исправляет файл?) then (Да)
    :Повторная проверка файла;
    detach;
  else (Нет)
    :Завершить процесс с ошибкой;
    stop;
  endif
endif

stop
@enduml